(function(){function r(b){if(g)b(g);else{var a=new XMLHttpRequest;a.open("GET",t,!0);a.onload=function(){if(200<=this.status&&300>this.status){var a=JSON.parse(this.response);g=a instanceof Array?a:a.posts;b(g)}else console.error(this.statusText)};a.onerror=function(){console.error(this.statusText)};a.send()}}function u(b,a){return b.replace(/\{\w+\}/g,function(b){b=b.replace(/\{|\}/g,"");return a[b]||""})}function v(b){var a="",a=b.length?b.map(function(a){return u(w,{title:a.title,path:(d.BLOG.ROOT+"/"+a.path).replace(/\/{2}/g,"/"),date:(new Date(a.date)).toLocaleDateString(),tags:a.tags.map(function(a){return"\x3cspan\x3e#"+a.name+"\x3c/span\x3e"}).join("")})}).join(""):'\x3cli class\x3d"tips"\x3e\x3ci class\x3d"icon icon-coffee icon-3x"\x3e\x3c/i\x3e\x3cp\x3eResults not found!\x3c/p\x3e\x3c/li\x3e';x.innerHTML=a}function h(b,a){a.lastIndex=0;return a.test(b)}function y(b,a){return h(b.title,a)||b.tags.some(function(b){return h(b.name,a)})||h(b.text,a)}function m(b){var a=this.value.trim();if(a){var c=new RegExp(a.replace(/[ ]/g,"|"),"gmi");r(function(a){a=a.filter(function(a){return y(a,c)});v(a);k.show()});b.preventDefault()}}var d=window||this,e=d.BLOG.even,c=d.BLOG.$,z=c("#search"),l=c("#search-wrap"),f=c("#key"),A=c("#back"),n=c("#search-panel"),x=c("#search-result"),w=c("#search-tpl").innerHTML,t=(d.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),g,p=d.BLOG.noop,q=c("html"),k={show:function(){760>d.innerWidth?q.classList.add("lock-size"):p;n.classList.add("in")},hide:function(){760>d.innerWidth?q.classList.remove("lock-size"):p;n.classList.remove("in")}};z.addEventListener(e,function(){l.classList.toggle("in");f.value="";l.classList.contains("in")?f.focus():f.blur()});A.addEventListener(e,function(){l.classList.remove("in");k.hide()});document.addEventListener(e,function(b){"key"!==b.target.id&&"click"===e&&k.hide()});f.addEventListener("input",m);f.addEventListener(e,m)}).call(this);