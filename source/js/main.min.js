/**
 * @Lizhooh
 * update time: 2018-04-11 10:03:23
 */(function(d,k){var t=k.body,e=k.querySelector.bind(k),n=k.querySelectorAll.bind(k),y=e("html"),v=e("#gotop"),p=e("#menu"),B=n("#menu ul.nav \x3e li"),h=e("#header"),q=e("#mask"),C=e("#menu-toggle"),D=e("#menu-off"),E=e("#loading"),w=d.requestAnimationFrame,F=200/(1E3/60),l=Array.prototype.forEach,g="ontouchstart"in d&&/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)?"touchstart":"click",z=/micromessenger/i.test(navigator.userAgent),u=function(){},x=function(a){var c=a.offsetLeft,b=a.offsetTop;if(a.offsetParent)var e=arguments.callee(a.offsetParent),c=c+e.x,b=b+e.y;return{x:c,y:b}},m=navigator.userAgent.match(/firefox/i)||navigator.msPointerEnabled?k.documentElement:t,b={goTop:function(a){var c=m.scrollTop,b=2<arguments.length?arguments[1]:Math.abs(c-a)/F;c&&c>a?(m.scrollTop=Math.max(c-b,0),w(arguments.callee.bind(this,a,b))):a&&c<a?(m.scrollTop=Math.min(c+b,a),w(arguments.callee.bind(this,a,b))):this.toc.actived(a)},toggleGotop:function(a){a>d.innerHeight/2?v.classList.add("in"):v.classList.remove("in")},toggleMenu:function(a){var c=e("#main");a?(p.classList.remove("hide"),1241>d.innerWidth&&(q.classList.add("in"),p.classList.add("show"),z?(a=m.scrollTop,c.classList.add("lock"),c.scrollTop=a):y.classList.add("lock"))):(p.classList.add("hide"),p.classList.remove("show"),q.classList.remove("in"),z?(a=c.scrollTop,c.classList.remove("lock"),m.scrollTop=a):y.classList.remove("lock"))},fixedHeader:function(a){a>this.fixedHeaderStart?(h.classList.add("fixed"),a>=this.cacheTop+25?(0<h.style.opacity&&(h.style.opacity=this.cacheOpacity-(a-this.cacheStart)/this.LEN),this.cacheEnd=this.cacheTop,this.cacheTop=a):a<=this.cacheTop-25&&(1>=h.style.opacity&&(h.style.opacity=this.cacheOpacity=(this.cacheEnd-a)/this.LEN),this.cacheTop=this.cacheStart=a)):(h.classList.remove("fixed"),1!=h.style.opacity&&(this.cacheOpacity=h.style.opacity=1,this.cacheStart=3*h.clientHeight))},toc:function(){var a=e("#post-toc");if(!a||!a.children.length)return{fixed:u,actived:u};var c=e(".post-header").clientHeight,b=h.clientHeight,d=e("#post-content").querySelectorAll("h1, h2, h3, h4, h5, h6");a.querySelector('a[href\x3d"#'+d[0].id+'"]').parentNode.classList.add("active");l.call(n('a[href^\x3d"#"]'),function(a){a.addEventListener("click",function(a){a.preventDefault();a=x(e('[id\x3d"'+decodeURIComponent(this.hash).substr(1)+'"]')).y-b;m.scrollTop=a})});return{fixed:function(d){d>=c-b?a.classList.add("fixed"):a.classList.remove("fixed")},actived:function(c){i=0;for(len=d.length;i<len;i++)c>x(d[i]).y-b-5&&(a.querySelector("li.active").classList.remove("active"),a.querySelector('a[href\x3d"#'+d[i].id+'"]').parentNode.classList.add("active"));c<x(d[0]).y&&(a.querySelector("li.active").classList.remove("active"),a.querySelector('a[href\x3d"#'+d[0].id+'"]').parentNode.classList.add("active"))}}}(),hideOnMask:[],modal:function(a){this.$modal=e(a);this.$off=this.$modal.querySelector(".close");var c=this;this.show=function(){q.classList.add("in");c.$modal.classList.add("ready");setTimeout(function(){c.$modal.classList.add("in")},0)};this.onHide=u;this.hide=function(){c.onHide();q.classList.remove("in");c.$modal.classList.remove("in");setTimeout(function(){c.$modal.classList.remove("ready")},300)};this.toggle=function(){return c.$modal.classList.contains("in")?c.hide():c.show()};b.hideOnMask.push(this.hide);this.$off&&this.$off.addEventListener(g,this.hide)},share:function(){var a=e("#pageShare"),c=e("#shareFab"),b=new this.modal("#globalShare");e("#menuShare").addEventListener(g,b.toggle);c&&(c.addEventListener(g,function(){a.classList.toggle("in")},!1),k.addEventListener(g,function(b){!c.contains(b.target)&&a.classList.remove("in")},!1));var d=new this.modal("#wxShare");d.onHide=b.hide;l.call(n(".wxFab"),function(a){a.addEventListener(g,d.toggle)})},search:function(){var a=e("#search-wrap");e("#search").addEventListener(g,function(){a.classList.toggle("in")})},reward:function(){var a=new this.modal("#reward");e("#rewardBtn").addEventListener(g,a.toggle)},waterfall:function(){760>d.innerWidth||l.call(n(".waterfall"),function(a){var c=a.querySelectorAll(".waterfall-item"),b=[0,0];l.call(c,function(a){var c=b[0]<=b[1]?0:1;a.style.cssText="top:"+b[c]+"px;left:"+(0<c?"50%":0);b[c]+=a.offsetHeight});a.style.height=Math.max(b[0],b[1])+"px";a.classList.add("in")})},tabBar:function(a){a.parentNode.parentNode.classList.toggle("expand")},page:function(){var a=n(".fade, .fade-scale"),c=!1;return{loaded:function(){l.call(a,function(a){a.classList.add("in")});c=!0},unload:function(){l.call(a,function(a){a.classList.remove("in")});c=!1},visible:c}}(),lightbox:function(){function a(a){this.$img=a.querySelector("img");this.$overlay=a.querySelector("overlay");this.margin=40;this.title=this.$img.title||this.$img.alt||"";this.isZoom=!1;var b,c,e,g,h;this.calcRect=function(){g=t.clientWidth;h=t.clientHeight;var a=h-2*this.margin,d=b,f=c,a=Math.min(d>g?g/d:1,f>a?a/f:1),d=d*a,f=f*a;return{w:d,h:f,t:(h-f)/2-e.top,l:(g-d)/2-e.left+this.$img.offsetLeft}};this.setImgRect=function(a){this.$img.style.cssText="width: "+a.w+"px; max-width: "+a.w+"px; height:"+a.h+"px; top: "+a.t+"px; left: "+a.l+"px"};this.setFrom=function(){this.setImgRect({w:e.width,h:e.height,t:0,l:(a.offsetWidth-e.width)/2})};this.setTo=function(){this.setImgRect(this.calcRect())};this.addTitle=function(){this.title&&(this.$caption=k.createElement("div"),this.$caption.innerHTML=this.title,this.$caption.className="overlay-title",a.appendChild(this.$caption))};this.removeTitle=function(){this.$caption&&a.removeChild(this.$caption)};var f=this;this.zoomIn=function(){b=this.$img.naturalWidth||this.$img.width;c=this.$img.naturalHeight||this.$img.height;e=this.$img.getBoundingClientRect();a.style.height=e.height+"px";a.classList.add("ready");this.setFrom();this.addTitle();this.$img.classList.add("zoom-in");setTimeout(function(){a.classList.add("active");f.setTo();f.isZoom=!0},0)};this.zoomOut=function(){this.isZoom=!1;a.classList.remove("active");this.$img.classList.add("zoom-in");this.setFrom();setTimeout(function(){f.$img.classList.remove("zoom-in");f.$img.style.cssText="";f.removeTitle();a.classList.remove("ready");a.removeAttribute("style")},300)};a.addEventListener("click",function(a){f.isZoom?f.zoomOut():"IMG"===a.target.tagName&&f.zoomIn()});k.addEventListener("scroll",function(){f.isZoom&&f.zoomOut()});d.addEventListener("resize",function(){f.isZoom&&f.zoomOut()})}l.call(n(".img-lightbox"),function(b){new a(b)})}(),loadScript:function(a){a.forEach(function(a){var b=k.createElement("script");b.src=a;b.async=!0;t.appendChild(b)})}};d.addEventListener("load",function(){b.waterfall();var a=m.scrollTop;b.toc.fixed(a);b.toc.actived(a);E.classList.remove("active");b.page.loaded();d.lazyScripts&&d.lazyScripts.length&&b.loadScript(d.lazyScripts)});var A=!1;d.addEventListener("beforeunload",function(a){A?A=!1:b.page.unload()});d.addEventListener("pageshow",function(){!b.page.visible&&b.page.loaded()});d.addEventListener("resize",function(){d.BLOG.even=g="ontouchstart"in d?"touchstart":"click";b.toggleMenu();b.waterfall()});v.addEventListener(g,function(){w(b.goTop.bind(b,0))},!1);C.addEventListener(g,function(a){b.toggleMenu(!0);a.preventDefault()},!1);l.call(B,function(a){a.addEventListener("click",function(c){b.toggleMenu(!1);c.stopPropagation();c.preventDefault();setTimeout(function(){window.location.href=a.children[0].href},300)},!1)});D.addEventListener(g,function(){p.classList.add("hide")},!1);q.addEventListener(g,function(a){b.toggleMenu();b.hideOnMask.forEach(function(a){a()});a.preventDefault()},!1);var r=0;k.addEventListener("scroll",function(){r=m.scrollTop;b.count++;b.toggleGotop(r);b.fixedHeader(r);b.toc.fixed(r);b.toc.actived(r)},!1);d.BLOG.SHARE&&b.share();d.BLOG.REWARD&&b.reward();h.style.opacity=1;b.noop=u;b.even=g;b.fixedHeaderStart=window.innerHeight-100;b.cacheTop=0;b.cacheStart=window.innerHeight-100;b.cacheEnd=0;b.cacheOpacity=1;b.LEN=640;b.count=0;b.$=e;b.$$=n;b.fixedHeader(m.scrollTop);setTimeout(function(){b.toggleMenu(!1)},4E3);Object.keys(b).reduce(function(a,c){a[c]=b[c];return a},d.BLOG);d.Waves?(Waves.init(),Waves.attach(".global-share li",["waves-block"]),Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"])):console.error("Waves loading failed.");(function(a,b){var c=b(".highlight");l.call(c,function(a,b){var c=a.classList.item(1);if("blockquote"!==a.parentNode.nodeName.toLowerCase()&&null!==c){var d=document.createElement("div");d.classList.add("codetype");d.classList.add(c);d.textContent=c.toUpperCase();a.appendChild(d)}})})(e,n)})(window,document);
